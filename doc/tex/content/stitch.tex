% !TeX root = ../DCR-Consensus.tex
\section{Stitch}
\subsection{Analysis} % Hvad er problemet
The goal of the algortithm is to: given a list of graphs representing partial order of logs and a local graph representing the partial order of logs - stitch the graphs of logs into the local graph such that the graph still fulfills that it represents the partial order of the union of logs from input graphs.\\

Correctness should be based on:
\begin{enumerate}
    \item That it creates a partial ordered graph
    \item How well it handles faulty logs
    \item How well it handles faulty graphs
\end{enumerate}

Logs should not be understood as executions only but all the different kinds of logs, see log description.
A partially ordered graph should not contain cycles.

\subsection{Implementation} % hvordan løses det
To solve the problem a datastructure which represents the partial order of logs has to be introduced. Such a datastructure must implement the following methods:

Add graph node:
    if exists(graph, node) {
        union matching node edge sets.
    else
        Add node to list of nodes.


Add graph edge:
Add edge to source node.

Stitch Algorithm:
foreach graph in list of graphs
foreach node in graph
add node to local graph
for each node1 in localgraph
foreach node2 in localgraph
If node1 and node2 does not have an edge 
if node1 and node2 has a happen before relation
create edge from node1 to node2
Cyclecheck

\subsection{Discussion} % bliver problemet løst
\subsection{Performance} % hvor godt løses det

