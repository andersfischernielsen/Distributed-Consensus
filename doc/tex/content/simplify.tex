% !TeX root = ../DCR-Consensus.tex
% !TeX spellcheck = en_GB
\section{Simplify}
\subsection{Goal} % Hvad er problemet
The goal of the algorithm is, given a partially ordered history, to create an order of execution, where execution is a particular form of log.
\todo{maybe do the problem description polymorphic}

\subsection{Implementation} % hvordan løses det
\begin{algorithmic}
	\State \Comment{Find start nodes}
	\ForAll{node in graph}
	    \If{node has no incoming edge}
		    \State add to startFromSet
		\EndIf
	\EndFor
	
	\State \Comment{Create transitive clousures}
	\ForAll{node1 in startFromSet}
	    \ForAll{node2 in edgeset from node1}
	        \If {node2 is execution log}
	            \State add edge from node1 to node2
	            \State add node2 to startFromSet
	            \State break
	        \EndIf
	    \EndFor
	\EndFor
	
	\State \Comment{Remove all non execution logs}
	\ForAll{node in graph}
	    \If {not execution log}
	        \State remove node from graph
	    \EndIf
	\EndFor
	      
	\State \Comment{Transitive reduction}
	\ForAll{node1 in graph}
	  \ForAll{node2 in graph}
	    \If{edge between node1 and node2 exists}
	      \ForAll{node3 in graph}
	        \If{edge between node2 and node3 exists AND edge between node1 and node3 exists}
	          \State remove node from node1 to node3
	        \EndIf
	      \EndFor
	    \EndIf
	  \EndFor
	\EndFor
\end{algorithmic}
\subsection{Discussion} % bliver problemet løst
Since the partial order of execution is a subset of the partially ordered history, it should be possible to create the same ordering of exeuctions logs as for all logs. By first making tranisitive clousures which ensures that partial order is explicit for all logs, and afterwards removing all unnecesary logs, we have kept the same ordering as before. Then in the end by making transitive reduction we create the minimal graph to represent the partial order, which only makes it easier to traverse the graph and visually represent the order of execution.

\subsection{Performance} % hvor godt løses det
This solution runs in \texttt{O(N$^3$)} where in is the number of logs of the history. This is due to the transitive reduction part of the algorithm. Luckily a big part of the events are cut of in this part, since only execution logs are left, if as expected, a proportionally majority part of the logs are non exectution logs, the complexity will be between \texttt{O(N$^2$)} and \texttt{O(N$^2$)}.

